<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../css/popup.css"/>
    <script src="../js/third-party/jquery-3.3.1.slim.min.js"></script>
    <script src="../js/third-party/mustache.min.js"></script>
    <script src="../../util/util.js"></script>
    <title>HTTP Scratchmarks</title>
  </head>

  <body>

    <div class="main-view-container">
      <div id="main-title">
        <h1 class="main-title-header" title="Search & replace HTTP response bodies before loading.">Enable HTTP Scratchmarks</h1>
        <div id="main-status">
          <div id="main-toggle">
            <div class="toggle">
              <label class="toggle-label">
                <input type="checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div id="main">
        <div class="site-view-container">
          <div id="site">
            <div id="site-status">
              <div id="site-toggle">
                <h3 class="toggle-text"></h3>
                <div class="toggle">
                  <label class="toggle-label">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="site-view-rules"></div>
        </div>
      </div>
    </div>

    <div class="edit-view-container">
      <div id="edit-title">
        <h1 class="edit-title-header">Edit rule</h1>
      </div>
      <div id="edit-main">
        <div id="path-id" data-path-id></div>
        <div id="edit-domain">
          <label class="input-label" for="edit-domain-path">If a URL matches</label>
          <div class="edit-segment">
            <input id="edit-domain-path" type="text" placeholder="place"/>
            <select class="edit-path-dropdown">
              <option value="domain">domain</option>
              <option value="fixpath">path</option>
              <option value="prefix">prefix</option>
              <option value="regex">regex</option>
            </select>
          </div>
        </div>
        <div id="edit-rule">
          <div id="rule-id" data-rule-id></div>
          <label class="input-label" for="edit-search">replace</label>
          <div class="edit-segment">
            <input id="edit-search" type="text" placeholder="string or regex" />
            <select class="edit-rule-dropdown">
              <option value="string">string</option>
              <option value="regex">regex</option>
            </select>
          </div>
          <label class="input-label" for="edit-replace">with</label>
          <div class="edit-segment">
            <input id="edit-replace" type="text" placeholder="string w/ matching groups (e.g. $1, $2, etc.)" />
          </div>
        </div>
      </div>
    </div>


    <div class="site-view-footer">
      <div class="icons">
        <div class="icon-wrapper">
          <span tabindex="0" title="Add new rule." class="icon add"></span>
        </div>
        <div class="icon-wrapper">
          <span tabindex="0" title="Export your rules." class="icon export"></span>
        </div>
        <div class="icon-wrapper">
          <span tabindex="0" title="Import previously exported rules." class="icon import"></span>
        </div>
        <div class="icon-wrapper">
          <span tabindex="0" title="Delete all rules." class="icon trash"></span>
        </div>
      </div>
    </div>

    <div class="edit-view-footer">
      <div class="icons">
        <div class="icon-wrapper">
          <span tabindex="0" title="Save rule." class="icon save"></span>
        </div>
        <div class="icon-wrapper">
          <span tabindex="0" title="Cancel editing." class="icon cancel"></span>
        </div>
        <div class="icon-wrapper">
          <span tabindex="0" title="Reset input fields." class="icon reset"></span>
        </div>
        <div class="icon-wrapper">
          <span tabindex="0" title="Search for existing rules." class="icon search"></span>
        </div>
      </div>
    </div>

  </body>

  <script id="site-name-template" type="text/template">
     Apply these rules on <span class="site-name" title="Add rule for domain">{{ domain }}</span>
  </script>

  <script id="site-path-template" type="text/template">
      <div class="site-rule-wrapper" title="{{ pathType }}: {{ pathName }}">
        <div class="site-rule-accordion-wrapper">
          <button class="site-rule-path">
            <span class="site-rule-path-text {{ pathType }}">{{ pathName }}</span>
          </button>
          <div class="site-rule-options">
   <span class="site-rule-options add" title="Add rule to path."></span>
            <span class="site-rule-options delete" title="Delete path & associated rules."></span>
          </div>
        </div>
        <div class="site-rule-content">
          <table class="site-rule-table">
            <tbody>
              <tr class="site-rule-table-header-row">
                <th class="site-rule-table-header">Search</th>
                <th class="site-rule-table-header">Replace</th>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
  </script>

  <script id="site-rule-template" type="text/template">
      <tr class="site-rule-table-row">
        <td class="site-rule-table-cell search {{ ruleType }}" title="{{ ruleType }}: {{ ruleSearch }}">{{ ruleSearch }}</td>
        <td class="site-rule-table-cell replace {{ ruleType }}" title="{{ ruleReplace }}" >{{ ruleReplace }}</td>
        <td class="site-rule-table-cell options">
          <span class="site-rule-table-row option delete" title="Delete this rule."></span>
        </td>
      </tr>
  </script>

  <script id="empty-list-template" type="text/template">
    <div class="info empty-list">There are no rules associated with this site.</div>
  </script>
  
  <script src="../js/popup.js"></script>
</html>
