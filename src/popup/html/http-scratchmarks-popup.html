<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="../css/http-scratchmarks-popup.css"/>
    <script src="../js/jquery-3.3.1.slim.min.js"></script>
    <script src="../js/mustache.min.js"></script>
    <title>HTTP Scratchmarks</title>
  </head>

  <body>
    <div class="main-view-container">
      <div id="main-title">
        <h1 class="main-title-header" title="Search & replace HTTP response bodies before loading.">Enable HTTP Scratchmarks</h1>
        <div id="main-status">
          <div id="main-toggle">
            <div class="toggle">
              <label class="toggle-label">
                <input type="checkbox" checked>
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
        </div>
      </div>
      <div id="main">
        <div class="site-view-container">
          <div id="site">
            <div id="site-status">
              <div id="site-toggle">
                <h3 class="toggle-text"></h3>
                <div class="toggle">
                  <label class="toggle-label">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="site-view-rules"></div>
          
        </div>
      </div>
    </div>
    <div class="edit-view-container">
      <div id="edit-title">
        <h1 class="edit-title-header">Edit rule</h1>
      </div>
      <div id="edit-main">
        <div id="path-id" data-path-id></div>
        <div id="edit-domain">
          <label class="input-label" for="edit-domain-path">If a URL matches</label>
          <div class="edit-segment">
            <input id="edit-domain-path" type="text" placeholder="place"/>
            <select class="edit-path-dropdown">
              <option value="domain">domain</option>
              <option value="fixpath">path</option>
              <option value="prefix">prefix</option>
              <option value="regex">regex</option>
            </select>
          </div>
        </div>
        <div id="edit-rule">
          <div id="rule-id" data-rule-id></div>
          <label class="input-label" for="edit-search">replace</label>
          <div class="edit-segment">
            <input id="edit-search" type="text" placeholder="string or regex" />
            <select class="edit-rule-dropdown">
              <option value="string">string</option>
              <option value="regex">regex</option>
            </select>
          </div>
          <label class="input-label" for="edit-replace">with</label>
          <div class="edit-segment">
            <input id="edit-replace" type="text" placeholder="string w/ matching groups (e.g. $1, $2, etc.)" />
          </div>
          <div class="edit-rule-buttons">
            <div id="edit-save-rule">
              <button>Save rule</button>
            </div>
            <div id="edit-cancel">
              <button>Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script id="site-name-template" type="text/template">
     Apply these rules on <span class="site-name" title="Add rule for domain">{{ domain }}</span>
    </script>

    <script id="site-path-template" type="text/template">
      <div class="site-rule-wrapper">
        <div class="site-rule-accordion-wrapper">
          <button class="site-rule-path">
            <span class="site-rule-path-text" title={{ pathName }}>{{ pathName }}</span>
          </button>
          <div class="site-rule-options">
            <span class="site-rule-options delete" title="Delete path & associated rules."></span>
          </div>
        </div>
        <div class="site-rule-content">
          <table class="site-rule-table">
            <tbody>
              <tr class="site-rule-table-header-row">
                <th class="site-rule-table-header search">replace</th>
                <th class="site-rule-table-header replace">with</th>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </script>

    <script id="site-rule-template" type="text/template">
      <tr class="site-rule-table-row">
        <td class="site-rule-table-row search" title="Click to edit.">{{ ruleSearch }}</td>
        <td class="site-rule-table-row replace" title="Click to edit." >{{ ruleReplace }}</td>
        <td class="site-rule-table-row options">
          <!--  <span class="site-rule-table-row option edit" title="Edit this rule."></span> -->
          <span class="site-rule-table-row option delete" title="Delete this rule."></span>
        </td>
      </tr>
    </script>


    <div class="site-view-footer">
      <div class="site-icons">
        <div class="site-icon-wrapper">
          <span title="Delete all rules." class="site-icon trash"></span>
        </div>
        <div class="site-icon-wrapper">
          <span title="Export your rules." class="site-icon export"></span>
        </div>
        <div class="site-icon-wrapper">
          <span title="Import previously exported rules." class="site-icon import"></span>
        </div>
        <div class="site-icon-wrapper">
          <span title="Add new rule." class="site-icon add"></span>
        </div>
      </div>
    </div>

  </body>
  <script src="../js/http-scratchmarks-popup.js"></script>
</html>
